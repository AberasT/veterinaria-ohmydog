{% extends 'main/layout.html' %}
{% block body %}

<div class="text-center">
    {% if request.user.is_authenticated %}
    <a href="{% url 'adopcion:publicar' %}" class="btn btn-outline-dark">Publicar Perro para Adopción</a>
    <a href="{% url 'adopcion:mis_publicaciones' %}" class="btn btn-outline-dark">Mis Publicaciones</a>
    <br>
    <hr>
    {% endif %}
    {% if publicaciones %}
    <h3>Listado de perros en adopción</h3><br>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Raza</th>
                <th scope="col">Color</th>
                <th scope="col">Edad</th>
                <th scope="col">Descripcion</th>
                <th scope="col">Fecha de Publicacion</th>
                <th scope="col">Fecha de Adopción</th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            {% for publicacion in publicaciones %}
            <tr>
                <th scope="row">{{ publicacion.nombre }}</th>
                <td>{{ publicacion.raza }}</td>
                <td>{{ publicacion.color }}</td>
                <td>{{ publicacion.edad }}</td>
                <td>{{ publicacion.descripcion }} </td>
                <td>{{ publicacion.fecha_publicacion }} </td>
                {% if publicacion.fecha_adopcion == None %}
                    <td> - </td>
                {% else %}
                    <td>{{ publicacion.fecha_adopcion }} </td>
                {% endif %}
                {% if publicacion.adoptado %}
                    <td style="color:green;">¡Adoptado!</td>
                {% elif user.is_authenticated %}
                    <td><a href="{% url 'adopcion:info' id=publicacion.id %}" class="btn btn-sm btn-secondary">Ver información</a></td>
                {% endif %}
                {% if user.is_staff or publicacion.publicador == user %}
                    {% if not publicacion.adoptado %}
                    <td><a href="{% url 'adopcion:eliminar' id=publicacion.id %}" onclick="return confirm('Eliminar publicación?');" class="btn-sm btn btn-danger">Eliminar publicación</a></td>
                    {% endif %}
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% else %}
    <h3>No hay perros publicados en adopción.</h3>
    {% endif %}
</div><br><br>
{% endblock %}