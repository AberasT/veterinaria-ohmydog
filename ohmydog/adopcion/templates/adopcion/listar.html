{% extends 'main/layout.html' %}
{% block body %}

<div class="text-center">
    {% if request.user.is_authenticated %}
    <a href="{% url 'adopcion:publicar' %}" class="btn btn-outline-dark">Publicar Perro para Adopción</a>
    <a href="{% url 'adopcion:mis_publicaciones' %}" class="btn btn-outline-dark">Mis Publicaciones</a>
    <br>
    <hr>
    {% endif %}
    {% if publicaciones %}
    <h3>Perros en adopción</h3><br>
    {% for perro in publicaciones %}
    <ul class="list-group" style="max-width: 50vw; margin: 0 auto">
        <li class="list-group-item text-white omdazul"><strong>Nombre: {{ perro.nombre }}</strong></li>
        {% if perro.adoptado %}
        <li class="list-group-item" style="color:green;"><strong>¡Adoptado!</strong> 😄</li>
        <li class="list-group-item">Fecha de publicación: {{ perro.fecha_publicacion }}</li>
        <li class="list-group-item">Fecha de adopción: {{ perro.fecha_adopcion }}</li>
        {% endif %}
        <li class="list-group-item">Raza: {{ perro.raza }}</li>
        <li class="list-group-item">Color: {{ perro.color }}</li>
        <li class="list-group-item">Edad: {{ perro.edad }}</li>
        <li class="list-group-item">Descripción: {{ perro.descripcion }}</li>
        {% if user.is_authenticated and not perro.adoptado %}
        <li class="list-group-item">
            <a href="{% url 'adopcion:info' id=perro.id %}" class="btn btn-sm btn-secondary">Ver información</a>
        </li>
        {% endif %}
        {% if user.is_staff or perro.publicador == user %}
            {% if not perro.adoptado %}
            <li class="list-group-item">
                <a href="{% url 'adopcion:eliminar' id=perro.id %}" onclick="return confirm('Eliminar publicación?');" class="btn-sm btn btn-danger">Eliminar publicación</a>
            </li>
            {% endif %}
        {% endif %}
    </ul><br><br>
    {% endfor %}    
    {% else %}
    <h3>No hay perros publicados en adopción.</h3>
    {% endif %}
</div><br><br>
{% endblock %}